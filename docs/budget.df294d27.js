let t;function e(t,e,n,o){Object.defineProperty(t,e,{get:n,set:o,enumerable:!0,configurable:!0})}var n,o,r,i,s,a,l,c,u,d,h,f,g,p,m,E,y,v,C,w,I,T,O,_,b,A,N,R,S,M,L,x,B,P,F,U,D,$,k,H,j,G,q,K,Y,z,J,Q,V,X,W,Z,tt,te,tn,to,tr,ti,ts,ta,tl,tc,tu,td,th,tf,tg,tp,tm,tE,ty,tv,tC,tw,tI,tT,tO,t_,tb,tA,tN,tR,tS,tM,tL,tx,tB,tP,tF,tU,tD,t$,tk,tH,tj=globalThis,tG={},tq={},tK=tj.parcelRequire94c2;null==tK&&((tK=function(t){if(t in tG)return tG[t].exports;if(t in tq){var e=tq[t];delete tq[t];var n={id:t,exports:{}};return tG[t]=n,e.call(n.exports,n,n.exports),n.exports}var o=Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){tq[t]=e},tj.parcelRequire94c2=tK),tK.register;var tY=tK("ilpIi"),tz=tK("47Mwn");(n=g||(g={})).STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object",(o=p||(p={})).LANGUAGE_UNSPECIFIED="language_unspecified",o.PYTHON="python",(r=m||(m={})).OUTCOME_UNSPECIFIED="outcome_unspecified",r.OUTCOME_OK="outcome_ok",r.OUTCOME_FAILED="outcome_failed",r.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded";/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tJ=["user","model","function","system"];(i=E||(E={})).HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",(s=y||(y={})).HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",s.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",s.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",s.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",s.BLOCK_NONE="BLOCK_NONE",(a=v||(v={})).HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",a.NEGLIGIBLE="NEGLIGIBLE",a.LOW="LOW",a.MEDIUM="MEDIUM",a.HIGH="HIGH",(l=C||(C={})).BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",l.SAFETY="SAFETY",l.OTHER="OTHER",(c=w||(w={})).FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",c.STOP="STOP",c.MAX_TOKENS="MAX_TOKENS",c.SAFETY="SAFETY",c.RECITATION="RECITATION",c.LANGUAGE="LANGUAGE",c.OTHER="OTHER",(u=I||(I={})).TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",u.RETRIEVAL_QUERY="RETRIEVAL_QUERY",u.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",u.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",u.CLASSIFICATION="CLASSIFICATION",u.CLUSTERING="CLUSTERING",(d=T||(T={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",d.AUTO="AUTO",d.ANY="ANY",d.NONE="NONE",(h=O||(O={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",h.MODE_DYNAMIC="MODE_DYNAMIC";/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tQ extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class tV extends tQ{constructor(t,e){super(t),this.response=e}}class tX extends tQ{constructor(t,e,n,o){super(t),this.status=e,this.statusText=n,this.errorDetails=o}}class tW extends tQ{}(f=_||(_={})).GENERATE_CONTENT="generateContent",f.STREAM_GENERATE_CONTENT="streamGenerateContent",f.COUNT_TOKENS="countTokens",f.EMBED_CONTENT="embedContent",f.BATCH_EMBED_CONTENTS="batchEmbedContents";class tZ{constructor(t,e,n,o,r){this.model=t,this.task=e,this.apiKey=n,this.stream=o,this.requestOptions=r}toString(){var t,e;let n=(null===(t=this.requestOptions)||void 0===t?void 0:t.apiVersion)||"v1beta",o=(null===(e=this.requestOptions)||void 0===e?void 0:e.baseUrl)||"https://generativelanguage.googleapis.com",r=`${o}/${n}/${this.model}:${this.task}`;return this.stream&&(r+="?alt=sse"),r}}async function t0(t){var e;let n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",function(t){let e=[];return(null==t?void 0:t.apiClient)&&e.push(t.apiClient),e.push("genai-js/0.21.0"),e.join(" ")}(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let o=null===(e=t.requestOptions)||void 0===e?void 0:e.customHeaders;if(o){if(!(o instanceof Headers))try{o=new Headers(o)}catch(t){throw new tW(`unable to convert customHeaders value ${JSON.stringify(o)} to Headers: ${t.message}`)}for(let[t,e]of o.entries()){if("x-goog-api-key"===t)throw new tW(`Cannot set reserved header name ${t}`);if("x-goog-api-client"===t)throw new tW(`Header name ${t} can only be set using the apiClient field`);n.append(t,e)}}return n}async function t1(t,e,n,o,r,i){let s=new tZ(t,e,n,o,i);return{url:s.toString(),fetchOptions:Object.assign(Object.assign({},function(t){let e={};if((null==t?void 0:t.signal)!==void 0||(null==t?void 0:t.timeout)>=0){let n=new AbortController;(null==t?void 0:t.timeout)>=0&&setTimeout(()=>n.abort(),t.timeout),(null==t?void 0:t.signal)&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}(i)),{method:"POST",headers:await t0(s),body:r})}}async function t2(t,e,n,o,r,i={},s=fetch){let{url:a,fetchOptions:l}=await t1(t,e,n,o,r,i);return t4(a,l,s)}async function t4(t,e,n=fetch){let o;try{o=await n(t,e)}catch(e){!function(t,e){let n=t;throw t instanceof tX||t instanceof tW||((n=new tQ(`Error fetching from ${e.toString()}: ${t.message}`)).stack=t.stack),n}(e,t)}return o.ok||await t3(o,t),o}async function t3(t,e){let n,o="";try{let e=await t.json();o=e.error.message,e.error.details&&(o+=` ${JSON.stringify(e.error.details)}`,n=e.error.details)}catch(t){}throw new tX(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${o}`,t.status,t.statusText,n)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t8(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),t7(t.candidates[0]))throw new tV(`${t9(t)}`,t);return function(t){var e,n,o,r;let i=[];if(null===(n=null===(e=t.candidates)||void 0===e?void 0:e[0].content)||void 0===n?void 0:n.parts)for(let e of null===(r=null===(o=t.candidates)||void 0===o?void 0:o[0].content)||void 0===r?void 0:r.parts)e.text&&i.push(e.text),e.executableCode&&i.push("\n```"+e.executableCode.language+"\n"+e.executableCode.code+"\n```\n"),e.codeExecutionResult&&i.push("\n```\n"+e.codeExecutionResult.output+"\n```\n");return i.length>0?i.join(""):""}(t)}if(t.promptFeedback)throw new tV(`Text not available. ${t9(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),t7(t.candidates[0]))throw new tV(`${t9(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),t5(t)[0]}if(t.promptFeedback)throw new tV(`Function call not available. ${t9(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),t7(t.candidates[0]))throw new tV(`${t9(t)}`,t);return t5(t)}if(t.promptFeedback)throw new tV(`Function call not available. ${t9(t)}`,t)},t}function t5(t){var e,n,o,r;let i=[];if(null===(n=null===(e=t.candidates)||void 0===e?void 0:e[0].content)||void 0===n?void 0:n.parts)for(let e of null===(r=null===(o=t.candidates)||void 0===o?void 0:o[0].content)||void 0===r?void 0:r.parts)e.functionCall&&i.push(e.functionCall);return i.length>0?i:void 0}const t6=[w.RECITATION,w.SAFETY,w.LANGUAGE];function t7(t){return!!t.finishReason&&t6.includes(t.finishReason)}function t9(t){var e,n,o;let r="";if((!t.candidates||0===t.candidates.length)&&t.promptFeedback)r+="Response was blocked",(null===(e=t.promptFeedback)||void 0===e?void 0:e.blockReason)&&(r+=` due to ${t.promptFeedback.blockReason}`),(null===(n=t.promptFeedback)||void 0===n?void 0:n.blockReasonMessage)&&(r+=`: ${t.promptFeedback.blockReasonMessage}`);else if(null===(o=t.candidates)||void 0===o?void 0:o[0]){let e=t.candidates[0];t7(e)&&(r+=`Candidate was blocked due to ${e.finishReason}`,e.finishMessage&&(r+=`: ${e.finishMessage}`))}return r}function et(t){return this instanceof et?(this.v=t,this):new et(t)}"function"==typeof SuppressedError&&SuppressedError;/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;async function en(t){let e=[],n=t.getReader();for(;;){let{done:t,value:o}=await n.read();if(t)return t8(function(t){let e=t[t.length-1],n={promptFeedback:null==e?void 0:e.promptFeedback};for(let e of t){if(e.candidates)for(let t of e.candidates){let e=t.index;if(n.candidates||(n.candidates=[]),n.candidates[e]||(n.candidates[e]={index:t.index}),n.candidates[e].citationMetadata=t.citationMetadata,n.candidates[e].groundingMetadata=t.groundingMetadata,n.candidates[e].finishReason=t.finishReason,n.candidates[e].finishMessage=t.finishMessage,n.candidates[e].safetyRatings=t.safetyRatings,t.content&&t.content.parts){n.candidates[e].content||(n.candidates[e].content={role:t.content.role||"user",parts:[]});let o={};for(let r of t.content.parts)r.text&&(o.text=r.text),r.functionCall&&(o.functionCall=r.functionCall),r.executableCode&&(o.executableCode=r.executableCode),r.codeExecutionResult&&(o.codeExecutionResult=r.codeExecutionResult),0===Object.keys(o).length&&(o.text=""),n.candidates[e].content.parts.push(o)}}e.usageMetadata&&(n.usageMetadata=e.usageMetadata)}return n}(e));e.push(o)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eo(t,e,n,o){return function(t){let[e,n]=(function(t){let e=t.getReader();return new ReadableStream({start(t){let n="";return function o(){return e.read().then(({value:e,done:r})=>{let i;if(r){if(n.trim()){t.error(new tQ("Failed to parse stream"));return}t.close();return}let s=(n+=e).match(ee);for(;s;){try{i=JSON.parse(s[1])}catch(e){t.error(new tQ(`Error parsing JSON response: "${s[1]}"`));return}t.enqueue(i),s=(n=n.substring(s[0].length)).match(ee)}return o()})}()}})})(t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0}))).tee();return{stream:function(t){return function(t,e,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var o,r=n.apply(t,e||[]),i=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(t){r[t]&&(o[t]=function(e){return new Promise(function(n,o){i.push([t,e,n,o])>1||a(t,e)})})}function a(t,e){try{var n;(n=r[t](e)).value instanceof et?Promise.resolve(n.value.v).then(l,c):u(i[0][2],n)}catch(t){u(i[0][3],t)}}function l(t){a("next",t)}function c(t){a("throw",t)}function u(t,e){t(e),i.shift(),i.length&&a(i[0][0],i[0][1])}}(this,arguments,function*(){let e=t.getReader();for(;;){let{value:t,done:n}=yield et(e.read());if(n)break;yield yield et(t8(t))}})}(e),response:en(n)}}(await t2(e,_.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),o))}async function er(t,e,n,o){let r=await t2(e,_.GENERATE_CONTENT,t,!1,JSON.stringify(n),o);return{response:t8(await r.json())}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(t){if(null!=t){if("string"==typeof t)return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function es(t){let e=[];if("string"==typeof t)e=[{text:t}];else for(let n of t)"string"==typeof n?e.push({text:n}):e.push(n);return function(t){let e={role:"user",parts:[]},n={role:"function",parts:[]},o=!1,r=!1;for(let i of t)"functionResponse"in i?(n.parts.push(i),r=!0):(e.parts.push(i),o=!0);if(o&&r)throw new tQ("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!o&&!r)throw new tQ("No content is provided for sending chat message.");return o?e:n}(e)}function ea(t){let e;return e=t.contents?t:{contents:[es(t)]},t.systemInstruction&&(e.systemInstruction=ei(t.systemInstruction)),e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],ec={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]},eu="SILENT_ERROR";class ed{constructor(t,e,n,o={}){this.model=e,this.params=n,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,(null==n?void 0:n.history)&&(function(t){let e=!1;for(let n of t){let{role:t,parts:o}=n;if(!e&&"user"!==t)throw new tQ(`First content should be with role 'user', got ${t}`);if(!tJ.includes(t))throw new tQ(`Each item should include role field. Got ${t} but valid roles are: ${JSON.stringify(tJ)}`);if(!Array.isArray(o))throw new tQ("Content should have 'parts' property with an array of Parts");if(0===o.length)throw new tQ("Each Content should have at least one part");let r={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(let t of o)for(let e of el)e in t&&(r[e]+=1);let i=ec[t];for(let e of el)if(!i.includes(e)&&r[e]>0)throw new tQ(`Content with role '${t}' can't contain '${e}' part`);e=!0}}(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,e={}){var n,o,r,i,s,a;let l;await this._sendPromise;let c=es(t),u={safetySettings:null===(n=this.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(o=this.params)||void 0===o?void 0:o.generationConfig,tools:null===(r=this.params)||void 0===r?void 0:r.tools,toolConfig:null===(i=this.params)||void 0===i?void 0:i.toolConfig,systemInstruction:null===(s=this.params)||void 0===s?void 0:s.systemInstruction,cachedContent:null===(a=this.params)||void 0===a?void 0:a.cachedContent,contents:[...this._history,c]},d=Object.assign(Object.assign({},this._requestOptions),e);return this._sendPromise=this._sendPromise.then(()=>er(this._apiKey,this.model,u,d)).then(t=>{var e;if(t.response.candidates&&t.response.candidates.length>0){this._history.push(c);let n=Object.assign({parts:[],role:"model"},null===(e=t.response.candidates)||void 0===e?void 0:e[0].content);this._history.push(n)}else{let e=t9(t.response);e&&console.warn(`sendMessage() was unsuccessful. ${e}. Inspect response object for details.`)}l=t}),await this._sendPromise,l}async sendMessageStream(t,e={}){var n,o,r,i,s,a;await this._sendPromise;let l=es(t),c={safetySettings:null===(n=this.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(o=this.params)||void 0===o?void 0:o.generationConfig,tools:null===(r=this.params)||void 0===r?void 0:r.tools,toolConfig:null===(i=this.params)||void 0===i?void 0:i.toolConfig,systemInstruction:null===(s=this.params)||void 0===s?void 0:s.systemInstruction,cachedContent:null===(a=this.params)||void 0===a?void 0:a.cachedContent,contents:[...this._history,l]},u=Object.assign(Object.assign({},this._requestOptions),e),d=eo(this._apiKey,this.model,c,u);return this._sendPromise=this._sendPromise.then(()=>d).catch(t=>{throw Error(eu)}).then(t=>t.response).then(t=>{if(t.candidates&&t.candidates.length>0){this._history.push(l);let e=Object.assign({},t.candidates[0].content);e.role||(e.role="model"),this._history.push(e)}else{let e=t9(t);e&&console.warn(`sendMessageStream() was unsuccessful. ${e}. Inspect response object for details.`)}}).catch(t=>{t.message!==eu&&console.error(t)}),d}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eh(t,e,n,o){return(await t2(e,_.COUNT_TOKENS,t,!1,JSON.stringify(n),o)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ef(t,e,n,o){return(await t2(e,_.EMBED_CONTENT,t,!1,JSON.stringify(n),o)).json()}async function eg(t,e,n,o){let r=n.requests.map(t=>Object.assign(Object.assign({},t),{model:e}));return(await t2(e,_.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:r}),o)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(t,e,n={}){this.apiKey=t,this._requestOptions=n,e.model.includes("/")?this.model=e.model:this.model=`models/${e.model}`,this.generationConfig=e.generationConfig||{},this.safetySettings=e.safetySettings||[],this.tools=e.tools,this.toolConfig=e.toolConfig,this.systemInstruction=ei(e.systemInstruction),this.cachedContent=e.cachedContent}async generateContent(t,e={}){var n;let o=ea(t),r=Object.assign(Object.assign({},this._requestOptions),e);return er(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(n=this.cachedContent)||void 0===n?void 0:n.name},o),r)}async generateContentStream(t,e={}){var n;let o=ea(t),r=Object.assign(Object.assign({},this._requestOptions),e);return eo(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(n=this.cachedContent)||void 0===n?void 0:n.name},o),r)}startChat(t){var e;return new ed(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(e=this.cachedContent)||void 0===e?void 0:e.name},t),this._requestOptions)}async countTokens(t,e={}){let n=function(t,e){var n;let o={model:null==e?void 0:e.model,generationConfig:null==e?void 0:e.generationConfig,safetySettings:null==e?void 0:e.safetySettings,tools:null==e?void 0:e.tools,toolConfig:null==e?void 0:e.toolConfig,systemInstruction:null==e?void 0:e.systemInstruction,cachedContent:null===(n=null==e?void 0:e.cachedContent)||void 0===n?void 0:n.name,contents:[]},r=null!=t.generateContentRequest;if(t.contents){if(r)throw new tW("CountTokensRequest must have one of contents or generateContentRequest, not both.");o.contents=t.contents}else if(r)o=Object.assign(Object.assign({},o),t.generateContentRequest);else{let e=es(t);o.contents=[e]}return{generateContentRequest:o}}(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),e);return eh(this.apiKey,this.model,n,o)}async embedContent(t,e={}){let n="string"==typeof t||Array.isArray(t)?{content:es(t)}:t,o=Object.assign(Object.assign({},this._requestOptions),e);return ef(this.apiKey,this.model,n,o)}async batchEmbedContents(t,e={}){let n=Object.assign(Object.assign({},this._requestOptions),e);return eg(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(t){this.apiKey=t}getGenerativeModel(t,e){if(!t.model)throw new tQ("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new ep(this.apiKey,t,e)}getGenerativeModelFromCachedContent(t,e,n){if(!t.name)throw new tW("Cached content must contain a `name` field.");if(!t.model)throw new tW("Cached content must contain a `model` field.");for(let n of["model","systemInstruction"])if((null==e?void 0:e[n])&&t[n]&&(null==e?void 0:e[n])!==t[n]){if("model"===n&&(e.model.startsWith("models/")?e.model.replace("models/",""):e.model)===(t.model.startsWith("models/")?t.model.replace("models/",""):t.model))continue;throw new tW(`Different value for "${n}" specified in modelParams (${e[n]}) and cachedContent (${t[n]})`)}let o=Object.assign(Object.assign({},e),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new ep(this.apiKey,o,n)}}var eE={};e(eE,"create",()=>b,t=>b=t),e(eE,"toCanvas",()=>A,t=>A=t),e(eE,"toDataURL",()=>N,t=>N=t),e(eE,"toString",()=>R,t=>R=t);var ey={};ey=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then};const ev=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];M=function(t){if(!t)throw Error('"version" cannot be null or undefined');if(t<1||t>40)throw Error('"version" should be in range from 1 to 40');return 4*t+17},L=function(t){return ev[t]},x=function(t){let e=0;for(;0!==t;)e++,t>>>=1;return e},B=function(e){if("function"!=typeof e)throw Error('"toSJISFunc" is not a valid function.');t=e},P=function(){return void 0!==t},F=function(e){return t(e)},U={bit:1},D={bit:0},$={bit:3},k={bit:2},H=function(t){return t&&void 0!==t.bit&&t.bit>=0&&t.bit<4},j=function(t,e){if(H(t))return t;try{return function(t){if("string"!=typeof t)throw Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return U;case"m":case"medium":return D;case"q":case"quartile":return $;case"h":case"high":return k;default:throw Error("Unknown EC Level: "+t)}}(t)}catch(t){return e}};var eC={};function ew(){this.buffer=[],this.length=0}ew.prototype={get:function(t){let e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)==1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(t){let e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},eC=ew;var eI={};function eT(t){if(!t||t<1)throw Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}eT.prototype.set=function(t,e,n,o){let r=t*this.size+e;this.data[r]=n,o&&(this.reservedBit[r]=!0)},eT.prototype.get=function(t,e){return this.data[t*this.size+e]},eT.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n},eT.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]},eI=eT,G=function(t){if(1===t)return[];let e=Math.floor(t/7)+2,n=M(t),o=145===n?26:2*Math.ceil((n-13)/(2*e-2)),r=[n-7];for(let t=1;t<e-1;t++)r[t]=r[t-1]-o;return r.push(6),r.reverse()},q=function(t){let e=[],n=G(t),o=n.length;for(let t=0;t<o;t++)for(let r=0;r<o;r++)(0!==t||0!==r)&&(0!==t||r!==o-1)&&(t!==o-1||0!==r)&&e.push([n[t],n[r]]);return e},K=function(t){let e=M(t);return[[0,0],[e-7,0],[0,e-7]]},Y={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const eO={N1:3,N2:3,N3:40,N4:10};z=function(t){return null!=t&&""!==t&&!isNaN(t)&&t>=0&&t<=7},J=function(t){return z(t)?parseInt(t,10):void 0},Q=function(t){let e=t.size,n=0,o=0,r=0,i=null,s=null;for(let a=0;a<e;a++){o=r=0,i=s=null;for(let l=0;l<e;l++){let e=t.get(a,l);e===i?o++:(o>=5&&(n+=eO.N1+(o-5)),i=e,o=1),(e=t.get(l,a))===s?r++:(r>=5&&(n+=eO.N1+(r-5)),s=e,r=1)}o>=5&&(n+=eO.N1+(o-5)),r>=5&&(n+=eO.N1+(r-5))}return n},V=function(t){let e=t.size,n=0;for(let o=0;o<e-1;o++)for(let r=0;r<e-1;r++){let e=t.get(o,r)+t.get(o,r+1)+t.get(o+1,r)+t.get(o+1,r+1);(4===e||0===e)&&n++}return n*eO.N2},X=function(t){let e=t.size,n=0,o=0,r=0;for(let i=0;i<e;i++){o=r=0;for(let s=0;s<e;s++)o=o<<1&2047|t.get(i,s),s>=10&&(1488===o||93===o)&&n++,r=r<<1&2047|t.get(s,i),s>=10&&(1488===r||93===r)&&n++}return n*eO.N3},W=function(t){let e=0,n=t.data.length;for(let o=0;o<n;o++)e+=t.data[o];return Math.abs(Math.ceil(100*e/n/5)-10)*eO.N4},Z=function(t,e){let n=e.size;for(let o=0;o<n;o++)for(let r=0;r<n;r++)e.isReserved(r,o)||e.xor(r,o,function(t,e,n){switch(t){case Y.PATTERN000:return(e+n)%2==0;case Y.PATTERN001:return e%2==0;case Y.PATTERN010:return n%3==0;case Y.PATTERN011:return(e+n)%3==0;case Y.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case Y.PATTERN101:return e*n%2+e*n%3==0;case Y.PATTERN110:return(e*n%2+e*n%3)%2==0;case Y.PATTERN111:return(e*n%3+(e+n)%2)%2==0;default:throw Error("bad maskPattern:"+t)}}(t,r,o))},tt=function(t,e){let n=Object.keys(Y).length,o=0,r=1/0;for(let i=0;i<n;i++){e(i),Z(i,t);let n=Q(t)+V(t)+X(t)+W(t);Z(i,t),n<r&&(r=n,o=i)}return o};const e_=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],eb=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];te=function(t,e){switch(e){case U:return e_[(t-1)*4+0];case D:return e_[(t-1)*4+1];case $:return e_[(t-1)*4+2];case k:return e_[(t-1)*4+3];default:return}},tn=function(t,e){switch(e){case U:return eb[(t-1)*4+0];case D:return eb[(t-1)*4+1];case $:return eb[(t-1)*4+2];case k:return eb[(t-1)*4+3];default:return}};var eA={};const eN=new Uint8Array(512),eR=new Uint8Array(256);function eS(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}!function(){let t=1;for(let e=0;e<255;e++)eN[e]=t,eR[t]=e,256&(t<<=1)&&(t^=285);for(let t=255;t<512;t++)eN[t]=eN[t-255]}(),ts=function(t){return eN[t]},ta=function(t,e){return 0===t||0===e?0:eN[eR[t]+eR[e]]},to=function(t,e){let n=new Uint8Array(t.length+e.length-1);for(let o=0;o<t.length;o++)for(let r=0;r<e.length;r++)n[o+r]^=ta(t[o],e[r]);return n},tr=function(t,e){let n=new Uint8Array(t);for(;n.length-e.length>=0;){let t=n[0];for(let o=0;o<e.length;o++)n[o]^=ta(e[o],t);let o=0;for(;o<n.length&&0===n[o];)o++;n=n.slice(o)}return n},ti=function(t){let e=new Uint8Array([1]);for(let n=0;n<t;n++)e=to(e,new Uint8Array([1,ts(n)]));return e},eS.prototype.initialize=function(t){this.degree=t,this.genPoly=ti(this.degree)},eS.prototype.encode=function(t){if(!this.genPoly)throw Error("Encoder not initialized");let e=new Uint8Array(t.length+this.degree);e.set(t);let n=tr(e,this.genPoly),o=this.degree-n.length;if(o>0){let t=new Uint8Array(this.degree);return t.set(n,o),t}return n},eA=eS,tI=function(t){return!isNaN(t)&&t>=1&&t<=40};const eM="[0-9]+";let eL="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";const ex="(?:(?![A-Z0-9 $%*+\\-./:]|"+(eL=eL.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";tT=RegExp(eL,"g"),tO=RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t_=RegExp(ex,"g"),tb=RegExp(eM,"g"),tA=RegExp("[A-Z $%*+\\-./:]+","g");const eB=RegExp("^"+eL+"$"),eP=RegExp("^"+eM+"$"),eF=RegExp("^[A-Z0-9 $%*+\\-./:]+$");tN=function(t){return eB.test(t)},tR=function(t){return eP.test(t)},tS=function(t){return eF.test(t)},th={id:"Numeric",bit:1,ccBits:[10,12,14]},tf={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},tg={id:"Byte",bit:4,ccBits:[8,16,16]},tp={id:"Kanji",bit:8,ccBits:[8,10,12]},tm={bit:-1},tE=function(t,e){if(!t.ccBits)throw Error("Invalid mode: "+t);if(!tI(e))throw Error("Invalid version: "+e);return e>=1&&e<10?t.ccBits[0]:e<27?t.ccBits[1]:t.ccBits[2]},ty=function(t){return tR(t)?th:tS(t)?tf:tN(t)?tp:tg},tv=function(t){if(t&&t.id)return t.id;throw Error("Invalid mode")},tC=function(t){return t&&t.bit&&t.ccBits},tw=function(t,e){if(tC(t))return t;try{return function(t){if("string"!=typeof t)throw Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return th;case"alphanumeric":return tf;case"kanji":return tp;case"byte":return tg;default:throw Error("Unknown mode: "+t)}}(t)}catch(t){return e}};const eU=x(7973);tl=function(t,e){return tI(t)?parseInt(t,10):e},tc=function(t,e,n){if(!tI(t))throw Error("Invalid QR Code version");void 0===n&&(n=tg);let o=(L(t)-tn(t,e))*8;if(n===tm)return o;let r=o-(tE(n,t)+4);switch(n){case th:return Math.floor(r/10*3);case tf:return Math.floor(r/11*2);case tp:return Math.floor(r/13);default:return Math.floor(r/8)}},tu=function(t,e){let n;let o=j(e,D);if(Array.isArray(t)){if(t.length>1)return function(t,e){for(let n=1;n<=40;n++)if(function(t,e){let n=0;return t.forEach(function(t){let o=tE(t.mode,e)+4;n+=o+t.getBitsLength()}),n}(t,n)<=tc(n,e,tm))return n}(t,o);if(0===t.length)return 1;n=t[0]}else n=t;return function(t,e,n){for(let o=1;o<=40;o++)if(e<=tc(o,n,t))return o}(n.mode,n.getLength(),o)},td=function(t){if(!tI(t)||t<7)throw Error("Invalid QR Code version");let e=t<<12;for(;x(e)-eU>=0;)e^=7973<<x(e)-eU;return t<<12|e};const eD=x(1335);tM=function(t,e){let n=t.bit<<3|e,o=n<<10;for(;x(o)-eD>=0;)o^=1335<<x(o)-eD;return(n<<10|o)^21522};var e$={};function ek(t){this.mode=th,this.data=t.toString()}ek.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},ek.prototype.getLength=function(){return this.data.length},ek.prototype.getBitsLength=function(){return ek.getBitsLength(this.data.length)},ek.prototype.write=function(t){let e,n;for(e=0;e+3<=this.data.length;e+=3)n=parseInt(this.data.substr(e,3),10),t.put(n,10);let o=this.data.length-e;o>0&&(n=parseInt(this.data.substr(e),10),t.put(n,3*o+1))},e$=ek;var eH={};const ej=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function eG(t){this.mode=tf,this.data=t}eG.getBitsLength=function(t){return 11*Math.floor(t/2)+t%2*6},eG.prototype.getLength=function(){return this.data.length},eG.prototype.getBitsLength=function(){return eG.getBitsLength(this.data.length)},eG.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let n=45*ej.indexOf(this.data[e]);n+=ej.indexOf(this.data[e+1]),t.put(n,11)}this.data.length%2&&t.put(ej.indexOf(this.data[e]),6)},eH=eG;var eq={};function eK(t){this.mode=tg,"string"==typeof t?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}eK.getBitsLength=function(t){return 8*t},eK.prototype.getLength=function(){return this.data.length},eK.prototype.getBitsLength=function(){return eK.getBitsLength(this.data.length)},eK.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)},eq=eK;var eY={};function ez(t){this.mode=tp,this.data=t}ez.getBitsLength=function(t){return 13*t},ez.prototype.getLength=function(){return this.data.length},ez.prototype.getBitsLength=function(){return ez.getBitsLength(this.data.length)},ez.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=F(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw Error("Invalid SJIS character: "+this.data[e]+"\nMake sure your charset is UTF-8");n=(n>>>8&255)*192+(255&n),t.put(n,13)}},eY=ez;var eJ={},eQ={single_source_shortest_paths:function(t,e,n){var o,r,i,s,a,l,c,u={},d={};d[e]=0;var h=eQ.PriorityQueue.make();for(h.push(e,0);!h.empty();)for(i in r=(o=h.pop()).value,s=o.cost,a=t[r]||{})a.hasOwnProperty(i)&&(l=s+a[i],c=d[i],(void 0===d[i]||c>l)&&(d[i]=l,h.push(i,l),u[i]=r));if(void 0!==n&&void 0===d[n])throw Error(["Could not find a path from ",e," to ",n,"."].join(""));return u},extract_shortest_path_from_predecessor_list:function(t,e){for(var n=[],o=e;o;)n.push(o),t[o],o=t[o];return n.reverse(),n},find_path:function(t,e,n){var o=eQ.single_source_shortest_paths(t,e,n);return eQ.extract_shortest_path_from_predecessor_list(o,n)},PriorityQueue:{make:function(t){var e,n=eQ.PriorityQueue,o={};for(e in t=t||{},n)n.hasOwnProperty(e)&&(o[e]=n[e]);return o.queue=[],o.sorter=t.sorter||n.default_sorter,o},default_sorter:function(t,e){return t.cost-e.cost},push:function(t,e){this.queue.push({value:t,cost:e}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};function eV(t){return unescape(encodeURIComponent(t)).length}function eX(t,e,n){let o;let r=[];for(;null!==(o=t.exec(n));)r.push({data:o[0],index:o.index,mode:e,length:o[0].length});return r}function eW(t){let e,n;let o=eX(tb,th,t),r=eX(tA,tf,t);return P()?(e=eX(t_,tg,t),n=eX(tT,tp,t)):(e=eX(tO,tg,t),n=[]),o.concat(r,e,n).sort(function(t,e){return t.index-e.index}).map(function(t){return{data:t.data,mode:t.mode,length:t.length}})}function eZ(t,e){switch(e){case th:return e$.getBitsLength(t);case tf:return eH.getBitsLength(t);case tp:return eY.getBitsLength(t);case tg:return eq.getBitsLength(t)}}function e0(t,e){let n;let o=ty(t);if((n=tw(e,o))!==tg&&n.bit<o.bit)throw Error('"'+t+'" cannot be encoded with mode '+tv(n)+".\n Suggested mode is: "+tv(o));switch(n!==tp||P()||(n=tg),n){case th:return new e$(t);case tf:return new eH(t);case tp:return new eY(t);case tg:return new eq(t)}}function e1(t,e,n){let o,r;let i=t.size,s=tM(e,n);for(o=0;o<15;o++)r=(s>>o&1)==1,o<6?t.set(o,8,r,!0):o<8?t.set(o+1,8,r,!0):t.set(i-15+o,8,r,!0),o<8?t.set(8,i-o-1,r,!0):o<9?t.set(8,15-o-1+1,r,!0):t.set(8,15-o-1,r,!0);t.set(i-8,8,1,!0)}function e2(t){if("number"==typeof t&&(t=t.toString()),"string"!=typeof t)throw Error("Color should be defined as hex string");let e=t.slice().replace("#","").split("");if(e.length<3||5===e.length||e.length>8)throw Error("Invalid hex color: "+t);(3===e.length||4===e.length)&&(e=Array.prototype.concat.apply([],e.map(function(t){return[t,t]}))),6===e.length&&e.push("F","F");let n=parseInt(e.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+e.slice(0,6).join("")}}function e4(t,e){let n=t.a/255,o=e+'="'+t.hex+'"';return n<1?o+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':o}function e3(t,e,n){let o=t+e;return void 0!==n&&(o+=" "+n),o}function e8(t,e,n,o,r){let i=[].slice.call(arguments,1),s=i.length,a="function"==typeof i[s-1];if(!a&&!ey())throw Error("Callback required as last argument");if(a){if(s<2)throw Error("Too few arguments provided");2===s?(r=n,n=e,e=o=void 0):3===s&&(e.getContext&&void 0===r?(r=o,o=void 0):(r=o,o=n,n=e,e=void 0))}else{if(s<1)throw Error("Too few arguments provided");return 1===s?(n=e,e=o=void 0):2!==s||e.getContext||(o=n,n=e,e=void 0),new Promise(function(r,i){try{let i=S(n,o);r(t(i,e,o))}catch(t){i(t)}})}try{let i=S(n,o);r(null,t(i,e,o))}catch(t){r(t)}}eJ=eQ,tL=function(t){return t.reduce(function(t,e){return"string"==typeof e?t.push(e0(e,null)):e.data&&t.push(e0(e.data,e.mode)),t},[])},tx=function(t,e){let n=function(t,e){let n={},o={start:{}},r=["start"];for(let i=0;i<t.length;i++){let s=t[i],a=[];for(let t=0;t<s.length;t++){let l=s[t],c=""+i+t;a.push(c),n[c]={node:l,lastCount:0},o[c]={};for(let t=0;t<r.length;t++){let i=r[t];n[i]&&n[i].node.mode===l.mode?(o[i][c]=eZ(n[i].lastCount+l.length,l.mode)-eZ(n[i].lastCount,l.mode),n[i].lastCount+=l.length):(n[i]&&(n[i].lastCount=l.length),o[i][c]=eZ(l.length,l.mode)+4+tE(l.mode,e))}}r=a}for(let t=0;t<r.length;t++)o[r[t]].end=0;return{map:o,table:n}}(function(t){let e=[];for(let n=0;n<t.length;n++){let o=t[n];switch(o.mode){case th:e.push([o,{data:o.data,mode:tf,length:o.length},{data:o.data,mode:tg,length:o.length}]);break;case tf:e.push([o,{data:o.data,mode:tg,length:o.length}]);break;case tp:e.push([o,{data:o.data,mode:tg,length:eV(o.data)}]);break;case tg:e.push([{data:o.data,mode:tg,length:eV(o.data)}])}}return e}(eW(t,P())),e),o=eJ.find_path(n.map,"start","end"),r=[];for(let t=1;t<o.length-1;t++)r.push(n.table[o[t]].node);return tL(r.reduce(function(t,e){let n=t.length-1>=0?t[t.length-1]:null;return n&&n.mode===e.mode?t[t.length-1].data+=e.data:t.push(e),t},[]))},tB=function(t){return tL(eW(t,P()))},S=function(t,e){let n,o;if(void 0===t||""===t)throw Error("No input text");let r=D;return void 0!==e&&(r=j(e.errorCorrectionLevel,D),n=tl(e.version),o=J(e.maskPattern),e.toSJISFunc&&B(e.toSJISFunc)),function(t,e,n,o){let r;if(Array.isArray(t))r=tL(t);else if("string"==typeof t){let o=e;o||(o=tu(tB(t),n)),r=tx(t,o||40)}else throw Error("Invalid data");let i=tu(r,n);if(!i)throw Error("The amount of data is too big to be stored in a QR Code");if(e){if(e<i)throw Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+i+".\n")}else e=i;let s=function(t,e,n){let o=new eC;n.forEach(function(e){o.put(e.mode.bit,4),o.put(e.getLength(),tE(e.mode,t)),e.write(o)});let r=(L(t)-tn(t,e))*8;for(o.getLengthInBits()+4<=r&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(0);let i=(r-o.getLengthInBits())/8;for(let t=0;t<i;t++)o.put(t%2?17:236,8);return function(t,e,n){let o,r;let i=L(e),s=i-tn(e,n),a=te(e,n),l=i%a,c=a-l,u=Math.floor(i/a),d=Math.floor(s/a),h=d+1,f=u-d,g=new eA(f),p=0,m=Array(a),E=Array(a),y=0,v=new Uint8Array(t.buffer);for(let t=0;t<a;t++){let e=t<c?d:h;m[t]=v.slice(p,p+e),E[t]=g.encode(m[t]),p+=e,y=Math.max(y,e)}let C=new Uint8Array(i),w=0;for(o=0;o<y;o++)for(r=0;r<a;r++)o<m[r].length&&(C[w++]=m[r][o]);for(o=0;o<f;o++)for(r=0;r<a;r++)C[w++]=E[r][o];return C}(o,t,e)}(e,n,r),a=M(e),l=new eI(a);return function(t,e){let n=t.size,o=K(e);for(let e=0;e<o.length;e++){let r=o[e][0],i=o[e][1];for(let e=-1;e<=7;e++)if(!(r+e<=-1)&&!(n<=r+e))for(let o=-1;o<=7;o++)i+o<=-1||n<=i+o||(e>=0&&e<=6&&(0===o||6===o)||o>=0&&o<=6&&(0===e||6===e)||e>=2&&e<=4&&o>=2&&o<=4?t.set(r+e,i+o,!0,!0):t.set(r+e,i+o,!1,!0))}}(l,e),function(t){let e=t.size;for(let n=8;n<e-8;n++){let e=n%2==0;t.set(n,6,e,!0),t.set(6,n,e,!0)}}(l),function(t,e){let n=q(e);for(let e=0;e<n.length;e++){let o=n[e][0],r=n[e][1];for(let e=-2;e<=2;e++)for(let n=-2;n<=2;n++)-2===e||2===e||-2===n||2===n||0===e&&0===n?t.set(o+e,r+n,!0,!0):t.set(o+e,r+n,!1,!0)}}(l,e),e1(l,n,0),e>=7&&function(t,e){let n,o,r;let i=t.size,s=td(e);for(let e=0;e<18;e++)n=Math.floor(e/3),o=e%3+i-8-3,r=(s>>e&1)==1,t.set(n,o,r,!0),t.set(o,n,r,!0)}(l,e),function(t,e){let n=t.size,o=-1,r=n-1,i=7,s=0;for(let a=n-1;a>0;a-=2)for(6===a&&a--;;){for(let n=0;n<2;n++)if(!t.isReserved(r,a-n)){let o=!1;s<e.length&&(o=(e[s]>>>i&1)==1),t.set(r,a-n,o),-1==--i&&(s++,i=7)}if((r+=o)<0||n<=r){r-=o,o=-o;break}}}(l,s),isNaN(o)&&(o=tt(l,e1.bind(null,l,n))),Z(o,l),e1(l,n,o),{modules:l,version:e,errorCorrectionLevel:n,maskPattern:o,segments:r}}(t,n,r,o)},tU=function(t){t||(t={}),t.color||(t.color={});let e=void 0===t.margin||null===t.margin||t.margin<0?4:t.margin,n=t.width&&t.width>=21?t.width:void 0,o=t.scale||4;return{width:n,scale:n?4:o,margin:e,color:{dark:e2(t.color.dark||"#000000ff"),light:e2(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},tD=function(t,e){return e.width&&e.width>=t+2*e.margin?e.width/(t+2*e.margin):e.scale},t$=function(t,e){let n=tD(t,e);return Math.floor((t+2*e.margin)*n)},tk=function(t,e,n){let o=e.modules.size,r=e.modules.data,i=tD(o,n),s=Math.floor((o+2*n.margin)*i),a=n.margin*i,l=[n.color.light,n.color.dark];for(let e=0;e<s;e++)for(let c=0;c<s;c++){let u=(e*s+c)*4,d=n.color.light;e>=a&&c>=a&&e<s-a&&c<s-a&&(d=l[r[Math.floor((e-a)/i)*o+Math.floor((c-a)/i)]?1:0]),t[u++]=d.r,t[u++]=d.g,t[u++]=d.b,t[u]=d.a}},tP=function(t,e,n){var o;let r=n,i=e;void 0!==r||e&&e.getContext||(r=e,e=void 0),e||(i=function(){try{return document.createElement("canvas")}catch(t){throw Error("You need to specify a canvas element")}}()),r=tU(r);let s=t$(t.modules.size,r),a=i.getContext("2d"),l=a.createImageData(s,s);return tk(l.data,t,r),o=i,a.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=s,o.width=s,o.style.height=s+"px",o.style.width=s+"px",a.putImageData(l,0,0),i},tF=function(t,e,n){let o=n;void 0!==o||e&&e.getContext||(o=e,e=void 0),o||(o={});let r=tP(t,e,o),i=o.type||"image/png",s=o.rendererOpts||{};return r.toDataURL(i,s.quality)},tH=function(t,e,n){let o=tU(e),r=t.modules.size,i=t.modules.data,s=r+2*o.margin,a=o.color.light.a?"<path "+e4(o.color.light,"fill")+' d="M0 0h'+s+"v"+s+'H0z"/>':"",l="<path "+e4(o.color.dark,"stroke")+' d="'+function(t,e,n){let o="",r=0,i=!1,s=0;for(let a=0;a<t.length;a++){let l=Math.floor(a%e),c=Math.floor(a/e);l||i||(i=!0),t[a]?(s++,a>0&&l>0&&t[a-1]||(o+=i?e3("M",l+n,.5+c+n):e3("m",r,0),r=0,i=!1),l+1<e&&t[a+1]||(o+=e3("h",s),s=0)):r++}return o}(i,r,o.margin)+'"/>',c='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+('viewBox="0 0 '+s)+" "+s+'" shape-rendering="crispEdges">'+a+l+"</svg>\n";return"function"==typeof n&&n(null,c),c},b=S,A=e8.bind(null,tP),N=e8.bind(null,tF),R=e8.bind(null,function(t,e,n){return tH(t,n)}),JSON.parse(localStorage.getItem("email"))||(window.location.href="index.html");const e5=document.getElementById("chatbotModal"),e6=document.getElementById("closeChatbot"),e7=document.getElementById("chatInput"),e9=document.getElementById("sendChat"),nt=document.getElementById("chatbotMessages"),ne=document.getElementById("addTransactionBtn"),nn=document.getElementById("transactionModal"),no=document.getElementById("transactionForm"),nr=document.getElementById("cancelBtn"),ni=document.getElementById("transactionsList");document.getElementById("generateQRCodeBtn").addEventListener("click",()=>{document.getElementById("qrcode").style.display="block",(eE&&eE.__esModule?eE.default:eE).toDataURL("https://anjalbinayak.github.io/budget-planner-app/",function(t,e){document.getElementById("qrImage").src=e})}),ne.addEventListener("click",()=>{nn.classList.add("active")}),nr.addEventListener("click",()=>{nn.classList.remove("active"),no.reset()}),no.addEventListener("submit",async t=>{t.preventDefault();let e=tz.auth.currentUser;if(!e){nc("Please sign in first","error");return}try{let t=document.getElementById("description").value,n=Number.parseFloat(document.getElementById("amount").value),o=document.getElementById("type").value;await (0,tY.addDoc)((0,tY.collection)(tz.db,"transactions"),{userId:e.uid,description:t,amount:n,type:o,date:(0,tY.serverTimestamp)()}),nn.classList.remove("active"),no.reset(),nc("Transaction added successfully!"),await ns()}catch(t){nc("Error adding transaction: "+t.message,"error")}}),(0,tz.auth).onAuthStateChanged(async t=>{t&&await ns()});const ns=async()=>{let t=tz.auth.currentUser;if(t)try{let e=(0,tY.query)((0,tY.collection)(tz.db,"transactions"),(0,tY.where)("userId","==",t.uid)),n=await (0,tY.getDocs)(e),o=n.docs.map(t=>({id:t.id,...t.data()})),r=0,i=0;if(ni.innerHTML="",n.empty){ni.innerHTML="No transactions yet";return}o.forEach(t=>{"income"===t.type?r+=Number.parseFloat(t.amount):i+=Number.parseFloat(t.amount);let e=document.createElement("div");e.className=`transaction ${t.type}`,e.innerHTML=`${t.description} ${"income"===t.type?"+":"-"}$${Number.parseFloat(t.amount).toFixed(2)}`;let n=document.createElement("button");n.innerHTML="<i class='fa fa-trash'></i>",n.className="delete-btn",n.addEventListener("click",async()=>{await (0,tY.deleteDoc)((0,tY.doc)(tz.db,"transactions",t.id)),nc("Transaction deleted successfully!"),ns()}),e.appendChild(n),ni.appendChild(e)}),nc("Transaction loaded successfully!","info"),document.getElementById("totalBalance").textContent=`$${(r-i).toFixed(2)}`,document.getElementById("totalIncome").textContent=`$${r.toFixed(2)}`,document.getElementById("totalExpenses").textContent=`$${i.toFixed(2)}`}catch(t){nc("Error loading transactions: "+t.message,"error")}finally{}};async function na(t){try{let e=new em("AIzaSyAb5n4-5OqHL9V0DE8ImoTv8dg-ltoALXU").getGenerativeModel({model:"gemini-1.5-flash"});return(await e.generateContent(t)).response.text()}catch(t){return console.error("Error calling Gemini AI:",t),"Error: Unable to process your request. Please try again later."}}function nl(t,e){let n=document.createElement("div");n.className="chat-message",n.innerHTML=`${t}: ${e}`,nt.appendChild(n),nt.scrollTop=nt.scrollHeight}function nc(t,e="success"){let n=document.createElement("div");n.className=`toast ${e}`,n.textContent=t,document.getElementById("toastContainer").appendChild(n),setTimeout(()=>n.remove(),3e3)}document.getElementById("chatbotButton").addEventListener("click",()=>{e5.classList.toggle("hidden")}),e6.addEventListener("click",()=>{e5.classList.add("hidden")}),e9.addEventListener("click",async()=>{let t=e7.value.trim();if(t){nl("You",t),e7.value="";try{let e=await na(t);nl("Gemini AI",e)}catch(t){nc("Error processing chat request: "+t.message,"error")}}});const nu=document.getElementById("refresh-txn");nu&&nu.addEventListener("click",async()=>{nu.classList.add("rotate"),setTimeout(()=>{nu.classList.remove("rotate")},2e3),await ns()}),console.log("Script loaded and executed");
//# sourceMappingURL=budget.df294d27.js.map
